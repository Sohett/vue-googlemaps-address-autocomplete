{"version":3,"file":"vue-google-maps-address-autocomplete.esm.js","sources":["../src/AddressAutocomplete.vue","../src/index.js"],"sourcesContent":["<script>\nexport default {\n  data () {\n    return {\n      addressAutocompleteRef: 'addressAutocompleteReference',\n    };\n  },\n  props: {\n    countryRestrictions: {\n      type: Array,\n      default () {\n        return ['be'];\n      },\n    },\n  },\n  methods: {\n    loadScript (src, id = null) {\n      return new Promise(function (resolve, reject) {\n        if (document.querySelector('script[src=\"' + src + '\"]')) {\n          resolve();\n\n          return;\n        }\n\n        const el = document.createElement('script');\n\n        el.type = 'text/javascript';\n        el.async = true;\n        el.src = src;\n        el.id = id;\n\n        el.addEventListener('load', resolve);\n        el.addEventListener('error', reject);\n        el.addEventListener('abort', reject);\n\n        document.head.appendChild(el);\n      });\n    },\n    loadGoogleMapsScript () {\n      this.loadScript(`https://maps.googleapis.com/maps/api/js?key=${this.$googleMapsApiKey}&libraries=places`)\n      .then(() => {\n        this.initializeAddressAutocomplete();\n      });\n    },\n    initializeAddressAutocomplete () {\n      const refComponent = this.$scopedSlots.default()[0].context.$refs[this.addressAutocompleteRef];\n      const inputElement = Object.values(refComponent?.$children?.[0]?.$refs || refComponent.$refs)[0];\n\n      this.autocomplete = new google.maps.places.Autocomplete(\n        inputElement,\n        { types: ['geocode'] },\n      );\n\n      this.autocomplete.setComponentRestrictions({ country: this.countryRestrictions });\n\n      this.autocomplete.addListener('place_changed', () => {\n        const place = this.autocomplete.getPlace();\n        const ac = place.address_components;\n\n        const {\n          route: streetName,\n          street_number: streetNumber = null,\n          postal_code: zipCode = null,\n          locality: city = null,\n        } = ac.reduce(function (map, obj) {\n          map[obj.types[0]] = obj.short_name;\n          return map;\n        }, {});\n\n        this.$emit('update-address', { streetName, streetNumber, zipCode, city });\n      });\n    },\n  },\n  render () {\n    return this.$scopedSlots.default({\n      loadGoogleMapsScript: this.loadGoogleMapsScript,\n      addressAutocompleteRef: this.addressAutocompleteRef,\n    });\n  },\n};\n</script>\n","// Import vue component\nimport component from './AddressAutocomplete.vue';\n\n// install function executed by Vue.use()\nfunction install(Vue) {\n  if (install.installed) return;\n  install.installed = true;\n  Vue.component('AddressAutocomplete', component);\n};\n\n// Create module definition for Vue.use()\nconst plugin = {\n  install,\n};\n\n// To auto-install when vue is found\nlet GlobalVue = null;\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\n// Inject install function into component - allows component\n// to be registered via Vue.use() as well as Vue.component()\ncomponent.install = install;\n\n// Export component by default\nexport default component;"],"names":["component"],"mappings":"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"}