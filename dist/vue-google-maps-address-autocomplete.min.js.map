{"version":3,"file":"vue-google-maps-address-autocomplete.min.js","sources":["../src/AddressAutocomplete.vue","../src/index.js"],"sourcesContent":["<script>\nexport default {\n  data () {\n    return {\n      addressAutocompleteRef: 'addressAutocompleteReference',\n    };\n  },\n  props: {\n    countryRestrictions: {\n      type: Array,\n      default () {\n        return ['be'];\n      },\n    },\n  },\n  methods: {\n    loadScript (src, id = null) {\n      return new Promise(function (resolve, reject) {\n        if (document.querySelector('script[src=\"' + src + '\"]')) {\n          resolve();\n\n          return;\n        }\n\n        const el = document.createElement('script');\n\n        el.type = 'text/javascript';\n        el.async = true;\n        el.src = src;\n        el.id = id;\n\n        el.addEventListener('load', resolve);\n        el.addEventListener('error', reject);\n        el.addEventListener('abort', reject);\n\n        document.head.appendChild(el);\n      });\n    },\n    loadGoogleMapsScript () {\n      this.loadScript(`https://maps.googleapis.com/maps/api/js?key=${this.$googleMapsApiKey}&libraries=places`)\n      .then(() => {\n        this.initializeAddressAutocomplete();\n      });\n    },\n    initializeAddressAutocomplete () {\n      const refComponent = this.$scopedSlots.default()[0].context.$refs[this.addressAutocompleteRef];\n\n      let inputElement;\n      if (refComponent.$children && refComponent.$children[0]) {\n        inputElement = Object.values(refComponent.$children[0].$refs)[0];\n      } else {\n        inputElement = refComponent;\n      }\n\n      this.autocomplete = new google.maps.places.Autocomplete(\n        inputElement,\n        { types: ['geocode'] },\n      );\n\n      this.autocomplete.setComponentRestrictions({ country: this.countryRestrictions });\n\n      this.autocomplete.addListener('place_changed', () => {\n        const place = this.autocomplete.getPlace();\n        const ac = place.address_components;\n\n        const {\n          route: streetName,\n          street_number: streetNumber = null,\n          postal_code: zipCode = null,\n          locality: city = null,\n        } = ac.reduce(function (map, obj) {\n          map[obj.types[0]] = obj.short_name;\n          return map;\n        }, {});\n\n        this.$emit('update-address', { streetName, streetNumber, zipCode, city });\n      });\n    },\n  },\n  render () {\n    return this.$scopedSlots.default({\n      loadGoogleMapsScript: this.loadGoogleMapsScript,\n      addressAutocompleteRef: this.addressAutocompleteRef,\n    });\n  },\n};\n</script>\n","// Import vue component\nimport component from './AddressAutocomplete.vue';\n\n// install function executed by Vue.use()\nfunction install(Vue) {\n  if (install.installed) return;\n  install.installed = true;\n  Vue.component('AddressAutocomplete', component);\n};\n\n// Create module definition for Vue.use()\nconst plugin = {\n  install,\n};\n\n// To auto-install when vue is found\nlet GlobalVue = null;\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\n// Inject install function into component - allows component\n// to be registered via Vue.use() as well as Vue.component()\ncomponent.install = install;\n\n// Export component by default\nexport default component;"],"names":["component"],"mappings":"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"}